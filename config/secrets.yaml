# ============================================================
# config/secrets.yaml
#
# Declarative definition of every secret written to .env.local.
# Processed by scripts/gen-secrets.sh on `make up`.
#
# ── Schema ───────────────────────────────────────────────────
#
# secrets:                          # required — top-level list
#   - key:    MY_VAR                # required — env var name
#                                   #   must match ^[A-Z][A-Z0-9_]+$
#     method: <method>              # required — one of the methods below
#     value:  <string>              # see per-method rules below
#     length: <integer>             # see per-method rules below
#
# ── Methods ──────────────────────────────────────────────────
#
#  static         Use `value` verbatim. No generation.
#                   • `value`  — required, non-empty string
#                   • `length` — forbidden
#
#  random_base64  URL-safe base64 string (no +/= padding chars).
#                 Safe for use in URLs, headers, and config files.
#                   • `value`  — forbidden
#                   • `length` — optional integer, 8–256 (default: 32)
#
#  random_hex     Lowercase hexadecimal string.
#                 Safe for use anywhere — no special characters.
#                   • `value`  — forbidden
#                   • `length` — optional integer, 8–256 (default: 32)
#
#  fernet         32-byte URL-safe base64 key for Airflow's Fernet
#                 encryption. Format is fixed by the Fernet spec.
#                   • `value`  — forbidden
#                   • `length` — forbidden
#
# ── Idempotency ──────────────────────────────────────────────
# gen-secrets.sh never overwrites a key already present in
# .env.local. Remove a line from .env.local to force regeneration
# of that specific key on the next `make up` / `make secrets`.
#
# ── Adding a new secret ──────────────────────────────────────
# 1. Add an entry to this file.
# 2. Run:  make secrets
#    The new key is appended; existing keys are untouched.
# ============================================================

secrets:

  # ── MinIO ──────────────────────────────────────────────────
  - key:    MINIO_ROOT_USER
    method: static
    value:  minioadmin

  - key:    MINIO_ROOT_PASSWORD
    method: random_base64
    length: 24

  # ── Postgres ───────────────────────────────────────────────
  - key:    POSTGRES_USER
    method: static
    value:  airflow

  - key:    POSTGRES_PASSWORD
    method: random_base64
    length: 24

  - key:    POSTGRES_DB
    method: static
    value:  airflow

  # ── Airflow ────────────────────────────────────────────────
  - key:    AIRFLOW_FERNET_KEY
    method: fernet

  - key:    AIRFLOW_SECRET_KEY
    method: random_base64
    length: 32

  - key:    AIRFLOW_ADMIN_USER
    method: static
    value:  admin

  - key:    AIRFLOW_ADMIN_PASSWORD
    method: random_hex
    length: 16

  - key:    AIRFLOW_ADMIN_EMAIL
    method: static
    value:  admin@example.com